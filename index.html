<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Basic Object Model</title>
    <link href="css/reveal.css" rel="stylesheet" />
    <link href="css/simple.css" rel="stylesheet" />
    <link href="css/googlecode.css" rel="stylesheet" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section class="center" data-background="#000">
  <h1 class="white">
    Basic Object Model
  </h1>
</section>
<section class="center" data-background="#000">
  <img class="inline" src="http://upload.wikimedia.org/wikipedia/commons/8/87/Ludogorets_FC.png" />
</section>
<section class="center" data-background="#000">
  <p class="white">
    MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI...
  </p>
</section>
<section class="center">
  <p>
    MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI...
  </p>
</section>
<section class="center" data-background="#000">
  <p class="white">
    MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI, MOTI...
  </p>
</section>
<section class="center">
  <p>
    There is a great definition of an <a href="http://c2.com/cgi/wiki?ObjectOriented">Object Oriented</a> system over <a href="http://c2.com/cgi/wiki?ObjectOriented">C2</a>.
  </p>
</section>
<section class="center">
  <p>
    Did I say how awesome <a href="http://c2.com">C2</a> is?
  </p>
</section>
<section class="center" data-background="#000">
  <h2 class="white">
    Questions
  </h2>
</section>
<section class="center">
  <p>
    What is Enumerable?
  </p>
</section>
<section class="center">
  <p>
    Is String Enumerable?
  </p>
</section>
<section class="center">
  <p>
    Can we make String Enumerable?
  </p>
</section>
<section class="center">
  <p>
    What is a Enumerator?
  </p>
</section>
<section class="center">
  <p>
    When do we use it?
  </p>
</section>
<section class="center">
  <p>
    What is a proc?
  </p>
</section>
<section class="center">
  <p>
    What is a lambda?
  </p>
</section>
<section class="center">
  <p>
    What is the difference between proc and lambda?
  </p>
</section>
<section class="center">
  <p>
    What is #=== used for?
  </p>
</section>
<section>
  <h2>
    Encapsulation
  </h2>
  <p>
    A language mechanism for restricting access to some of the object's components.
  </p>
</section>
<section>
  <h2>
    Encapsulation
  </h2>
  <p>
    A language construct that facilitates the bundling of data with the methods (or other functions) operating on that data.
  </p>
</section>
<section>
  <h2>
    Inheritance
  </h2>
  <p>
    When an object or class is based on another object or class, using the same implementation (inheriting from a class) or specifying implementation to maintain the same behavior (realizing an interface; inheriting behavior).
  </p>
</section>
<section>
  <h2>
    Inheritance
  </h2>
  <p>
    It is a mechanism for code reuse and to allow independent extensions of the original software via public classes and interfaces.
  </p>
</section>
<section>
  <h2>
    Inheritance
  </h2>
  <p>
    The relationships of objects or classes through inheritance give rise to a hierarchy.
  </p>
</section>
<section>
  <h2>
    Polymorphism
  </h2>
  <p>
    The provision of a single interface to entities of different types
  </p>
</section>
<section>
  <h2>
    Polymorphism
  </h2>
  <p>
    A polymorphic type is a type whose operations can also be applied to values of some other type, or types.
  </p>
</section>
<section class="center">
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    [@x, @y, @z].map { |n| n ** 2 }.reduce(:+) ** 0.5
  end
end </code></pre>
</section>
<section class="center">
  <img class="inline" src="img/troll.png" />
</section>
<section class="center">
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section class="center" data-background="#000">
  <blockquote class="white">With great power comes great responsibility.</blockquote>
  <p class="white">
    Stefan Kanev
  </p>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Opened by the keyword class
  </p>
  <pre><code class="ruby" contenteditable="true">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Never closed throughout the run of a program
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    The class body is executable code
  </p>
  <pre><code class="ruby">class String
  puts "Hello, I opened a class and printed a message."
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    The class body is executable code
  </p>
  <pre><code class="ruby">class String
  puts "Its useless, but its okay"
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    The class body is executable code
  </p>
  <pre><code class="ruby">class Object
  if RUBY_VERSION < '1.8.6'
    def tap
      yield self
    end
  end
end </code></pre>
</section>
<section>
  <h2>
    Class#new
  </h2>
  <p>
    Initialises a new object
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end

vector = Vector3D.new(1, 0, 0)
#=> #<Vector3D:0x007fbfd20806f8 @x=1, @y=0, @z=0> </code></pre>
</section>
<section>
  <h2>
    Class#new
  </h2>
  <p>
    Class#allocate a new object and call ClassInstance#initialize
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end

vector = Vector3D.new(1, 0, 0)
#=> #<Vector3D:0x007fbfd20806f8 @x=1, @y=0, @z=0> </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Can define methods
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Can instruct objects to store instance variables
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Inherit from Object by default
  </p>
  <pre><code class="ruby">class Vector3D
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Inherit from Object by default
  </p>
  <pre><code class="ruby">class Vector3D < Object
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section class="center" data-background="#000">
  <p class="white">
    Everything in Ruby is an object
  </p>
</section>
<section class="center">
  <pre><code class="ruby">>> Object.is_a? Object
=> true </code></pre>
</section>
<section class="center">
  <img class="inline" src="img/troll.png" />
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    There is no multiple inheritance
  </p>
  <pre><code class="ruby">class Vector3D < Object
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Can override operators
  </p>
  <pre><code class="ruby">class Vector3D < Object
  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end

  def +(other)
    if other.is_a? Numeric
      Vector.new(@x + other, @y, + other, @z + other)
    end
  end
end </code></pre>
</section>
<section data-background="#000">
  <pre class="white">Method  Operator
Y       [ ] [ ]=
Y       **
Y       ! ~
Y       * / %
Y       + -
Y       >> <<
Y       &
Y       ^ |
Y       <= < > >=
Y       <=> == === != =~ !~
        &&
        ||
        .. ...
        ? :
        = %= { /= -= += |= &= >>= <<= *= &&= ||= **=
        defined?
        not
        or and
        if unless while until
        begin/end </pre>
</section>
<section data-background="#000">
  <pre class="white">Method  Operator
Y       [ ] [ ]=
Y       **
Y       ! ~
Y       * / %
Y       + -
Y       >> <<
Y       &
Y       ^ |
Y       <= < > >=
Y       <=> == === != =~ !~

^-----------------------------.
| We can only override those. |
'-----------------------------' </pre>
</section>
<section>
  <h2>
    Instance Variables
  </h2>
  <p>
    Identifier prefixed with a @
  </p>
  <pre><code class="ruby">class Version
  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    Instance Variables
  </h2>
  <p>
    Object specific
  </p>
  <pre><code class="ruby">class Version
  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    Instance Variables
  </h2>
  <p>
    Cannot be accessed outside of an object
  </p>
  <pre><code class="ruby">>> version = Version.new(1, 0, 0)
=> #<Version:0x007fa5239c1088 @major=1, @minor=0, @patch=0>

>> version.@major
SyntaxError: (irb):11: syntax error, unexpected tIVAR, expecting '(' </code></pre>
</section>
<section>
  <h2>
    Instance Variables
  </h2>
  <p>
    Nil if undefined
  </p>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Can expose instance variables
  </p>
  <pre><code class="ruby">class Vector3D < Object
  attr_accessor :x, :y, :z

  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end

  def +(other)
    if other.is_a? Numeric
      Vector.new(@x + other, @y, + other, @z + other)
    end
  end
end </code></pre>
</section>
<section>
  <h2>
    Class
  </h2>
  <p>
    Communicate with other classes only with methods
  </p>
  <pre><code class="ruby">class Vector3D < Object
  attr_accessor :x, :y, :z

  def initialize(x, y, z)
    @x, @y, @z = x, y, z
  end

  def length
    (@x ** 2 + @y ** 2 + @z ** 2) ** 0.5
  end

  def +(other)
    if other.is_a? Numeric
      Vector.new(@x + other, @y, + other, @z + other)
    else
      Vextor.new(@x + other.x, @y + other.y, @z + other)
    end
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_accessor
  </h2>
  <p>
    Creates those methods
  </p>
  <pre><code class="ruby">class Version
  attr_accessor :major
  attr_accessor :minor
  attr_accessor :patch

  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_accessor
  </h2>
  <p>
    We call them getter and setter
  </p>
  <pre><code class="ruby">class Version
  attr_accessor :major
  attr_accessor :minor
  attr_accessor :patch

  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_accessor
  </h2>
  <p>
    We call them getter and setter
  </p>
  <pre><code class="ruby">class Version
  attr_accessor :major, :minor, :patch

  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_accessor
  </h2>
  <p>
    Under the hood
  </p>
  <pre><code class="ruby">class Version
  def major
    @major
  end

  def major=(value)
    @major = value
  end

  # ...
end </code></pre>
</section>
<section>
  <h2>
    attr_accessor
  </h2>
  <p>
    Creates a getter and setter
  </p>
  <pre><code class="ruby">>> version = Version.new(1, 0, 0)
=> #<Version:0x007fa5239c1088 @major=1, @minor=0, @patch=0>

>> version.major = 2
=> 2
>> version.major
=> 2 </code></pre>
</section>
<section>
  <h2>
    attr_reader
  </h2>
  <p>
    Creates a getter only
  </p>
  <pre><code class="ruby">class Version
  attr_reader :major
  attr_reader :minor
  attr_reader :patch

  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_reader
  </h2>
  <p>
    Creates a getter only
  </p>
  <pre><code class="ruby">>> version = Version.new(1, 0, 0)
=> #<Version:0x007fa5239c1088 @major=1, @minor=0, @patch=0>

>> version.major
=> 1
>> version.major = 2
NameError: undefined local variable or method `major=' for main:Object </code></pre>
</section>
<section>
  <h2>
    attr_writter
  </h2>
  <p>
    Creates a setter only
  </p>
  <pre><code class="ruby">class Version
  attr_writter :major
  attr_writter :minor
  attr_writter :patch

  def initialize(major, minor, patch)
    @major, @minor, @patch = major, minor, patch
  end
end </code></pre>
</section>
<section>
  <h2>
    attr_writter
  </h2>
  <p>
    Creates a setter only
  </p>
  <pre><code class="ruby">>> version = Version.new(1, 0, 0)
=> #<Version:0x007fa5239c1088 @major=1, @minor=0, @patch=0>

>> version.major
NameError: undefined local variable or method `major' for main:Object
>> version.major = 2
=> 2 </code></pre>
</section>
<section>
  <h2>
    self
  </h2>
  <p>
    Returns the object itself
  </p>
  <pre><code class="ruby">class Object
  def itself
    self
  end
end </code></pre>
</section>
<section>
  <h2>
    self
  </h2>
  <p>
    Can be used to call methods on
  </p>
  <pre><code class="ruby">class Array
  def filter_primes
    self.filter { |element| element.prime? }
  end
end </code></pre>
</section>
<section>
  <h2>
    self
  </h2>
  <p>
    If omitted it is called implicitly
  </p>
  <pre><code class="ruby">class Array
  def filter_primes
    filter { |element| element.prime? }
  end
end </code></pre>
</section>
<section>
  <h2>
    Module#private
  </h2>
  <p>
    With no arguments, sets the default visibility for subsequently defined methods to private
  </p>
  <pre><code class="ruby">class Mod
  def a()  end
  def b()  end

  private
  def c()  end

  private :a
end

Mod.private_instance_methods   #=> [:a, :c] </code></pre>
</section>
<section>
  <h2>
    Module#private
  </h2>
  <p>
    With arguments, sets the named methods to have private visibility
  </p>
  <pre><code class="ruby">class Mod
  def a()  end
  def b()  end

  private
  def c()  end

  private :a
end

Mod.private_instance_methods   #=> [:a, :c] </code></pre>
</section>
<section class="center" data-background="#000">
  <p class="white">
    Wait, but what is a private method in Ruby?
  </p>
</section>
<section>
  <p>
    A private method can only be called without an explicit receiver
  </p>
</section>
<section>
  <p>
    Can be inherited by subclasses, can be invoked by subclasses, all that jazz
  </p>
</section>
<section>
  <p>
    This is not Java
  </p>
</section>
<section>
  <h2>
    Module#protected
  </h2>
  <p>
    With no arguments, sets the default visibility for subsequently defined methods to protected
  </p>
  <pre><code class="ruby">class Mod
  def a()  end
  def b()  end

  protected
  def c()  end

  protected :a
end

Mod.protected_instance_methods   #=> [:a, :c] </code></pre>
</section>
<section>
  <h2>
    Module#protected
  </h2>
  <p>
    With arguments, sets the named methods to have protected visibility
  </p>
  <pre><code class="ruby">class Mod
  def a()  end
  def b()  end

  protected
  def c()  end

  protected :a
end

Mod.protected_instance_methods   #=> [:a, :c] </code></pre>
</section>
<section class="center" data-background="#000">
  <p class="white">
    Wait, but what is a protected method in Ruby?
  </p>
</section>
<section>
  <p>
    A method that can be called with an explicit receiver only inside its class or a derived class opening
  </p>
</section>
<section>
  <p>
    The usual private method you see in other languages
  </p>
</section>
<section>
  <p>
    Can be inherited by subclasses, can be invoked by subclasses
  </p>
</section>
<section>
  <h2>
    Module
  </h2>
  <p>
    Opened by the keyword module
  </p>
  <pre><code class="ruby">module Filterable
  def filter
    result = []
    each do |element|
      result << element if yield(element)
    end
    result
  end
end </code></pre>
</section>
<section>
  <h2>
    Module
  </h2>
  <p>
    Included in a class or module with the method Module#include
  </p>
  <pre><code class="ruby">class Collection
  include Filterable

  def initialize(*data)
    @data = data
  end

  def each(&block)
    @data.each(&block)
  end
end </code></pre>
</section>
<section>
  <h2>
    Module
  </h2>
  <p>
    The newly added methods are available in the includee
  </p>
  <pre><code class="ruby">>> collection = Collection.new(1, 2, 3, 4, 5)
=> #<Collection:0x007fa5238d4440 @data=[1, 2, 3, 4, 5]>
>> collection.filter(&:odd?)
=> [1, 3, 5] </code></pre>
</section>
<section>
  <h2>
    Module
  </h2>
  <p>
    Methods with the same name in class take priority over methods in modules
  </p>
  <pre><code class="ruby">module Nameless
  def name() "" end
end

class Person
  include Nameless

  def name; "Not nameless anymore!"; end
end

Person.new.name
#=> "Not nameless anymore!" </code></pre>
</section>
<section>
  <h2>
    Module
  </h2>
  <p>
    Otherwise the method in the last included module is picked up
  </p>
  <pre><code class="ruby">module Chunky
  def name() 'chunky' end
end

module Bacon
  def name() 'bacon' end
end

class Something
  include Chunky
  include Bacon
end </code></pre>
</section>
<section class="center">
  <pre>OBJECTS ARE                   _________
LIKE A                      .`.        `.
MAILBOX                    /   \ .======.\
                           |   | |______||
                           |   |   _____ |
                           |   |  /    / |
THEY COMMUNICATE           |   | /____/  |
WITH                       | _ |         |
MESSAGES                   |/ \|.-"```"-.|
                           `` |||      |||
                        jgs   `"`      `" </pre>
</section>
<section class="center">
  <pre>OBJECTS ARE                   _________
LIKE A                      .`.        `.
MAILBOX                    /   \ .======.\
                           |   | |______||
                           |   |   _____ |
                           |   |  /    / |
CALLING A METHOD           |   | /____/  |
ON AN OBJECT               | _ |         |
IS SENDING A MESSAGE       |/ \|.-"```"-.|
                           `` |||      |||
                        jgs   `"`      `" </pre>
</section>
<section>
  <h2>
    Object#send
  </h2>
  <p>
    Programatically call a method on an object
  </p>
  <pre><code class="ruby">class Symbol
  def to_proc
    -> object, *args { object.public_send self, *args }
  end
end </code></pre>
</section>
<section>
  <h2>
    Object#public_send
  </h2>
  <p>
    A bit safer, calls only public methods
  </p>
  <pre><code class="ruby">class Symbol
  def to_proc
    -> object, *args { object.public_send self, *args }
  end
end </code></pre>
</section>
      </div>
    </div>
    <script src="js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script type="text/javascript">
      Reveal.initialize({
        width:  '100%',
        height: '100%',
        margin: 0.05,
        controls: false,
        progress: false,
        history: true,
        center: false,
        rollingLinks: true,
        transition: 'none',
        backgroundTransition: 'none',
        dependencies: [
          {
            src: 'js/highlight.js',
            async: true,
            callback: function() {
              hljs.configure({ languages: ['ruby'] });
              hljs.initHighlightingOnLoad();
            }
          }
        ]
      });
    </script>
  </body>
</html>